{
  "summary": {
    "total_tests": 56,
    "passed_tests": 51,
    "success_rate": 91.07142857142857,
    "timestamp": "2026-01-30T13:53:52.449184"
  },
  "detailed_results": [
    {
      "test_name": "Login with test user",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxNzY5NzMzMDc4NDk2ODg3IiwiZXhwIjoxNzcwMzg2MDMyfQ.R5ImasP43THsbQlArwb4uoXj3k2C3uKTbc-9lGlO9Go",
        "token_type": "bearer",
        "user": {
          "email": "test@aerologix.ca",
          "name": "Test User",
          "id": "1769733078496887",
          "created_at": "2026-01-30T00:31:18.739000",
          "subscription": {
            "plan_code": "BASIC",
            "plan": "BASIC",
            "status": "active",
            "stripe_customer_id": null,
            "stripe_subscription_id": null,
            "trial_end": null,
            "current_period_end": null
          },
          "limits": {
            "max_aircrafts": 1,
            "ocr_per_month": 5,
            "logbook_entries_per_month": 10,
            "gps_logbook": false,
            "tea_amo_sharing": false,
            "invoices": false,
            "cost_per_hour": false,
            "prebuy": false,
            "has_fleet_access": false,
            "has_mechanic_sharing": false
          }
        }
      },
      "timestamp": "2026-01-30T13:53:52.346246"
    },
    {
      "test_name": "Get aircraft list",
      "success": true,
      "details": "Status: 200",
      "response_data": [
        {
          "registration": "C-GTEST",
          "aircraft_type": null,
          "manufacturer": null,
          "model": "172",
          "year": 2020,
          "serial_number": "TEST123456",
          "airframe_hours": 2000.0,
          "engine_hours": 1800.0,
          "propeller_hours": 1000.0,
          "photo_url": null,
          "description": null,
          "adsb_has_new_tc_items": false,
          "count_new_adsb": 0,
          "last_tc_adsb_version": null,
          "last_adsb_reviewed_at": null,
          "_id": "1769733120179849",
          "user_id": "1769733078496887",
          "created_at": "2026-01-30T00:32:00.179000",
          "updated_at": "2026-01-30T02:15:06.155000"
        }
      ],
      "timestamp": "2026-01-30T13:53:52.353518"
    },
    {
      "test_name": "Get TC references for aircraft C-GTEST",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "aircraft_id": "1769733120179849",
        "total_count": 0,
        "references": []
      },
      "timestamp": "2026-01-30T13:53:52.357685"
    },
    {
      "test_name": "TC references list validation",
      "success": true,
      "details": "All validations passed. Total references: 0, New flags present: has_user_pdf, can_delete, can_open_pdf",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.357753"
    },
    {
      "test_name": "TC reference delete test",
      "success": true,
      "details": "No references available for deletion testing (expected for new system)",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.357762"
    },
    {
      "test_name": "TC PDF endpoint test",
      "success": true,
      "details": "No references available for PDF testing (expected for new system)",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.357769"
    },
    {
      "test_name": "Get aircraft list",
      "success": true,
      "details": "Status: 200",
      "response_data": [
        {
          "registration": "C-GTEST",
          "aircraft_type": null,
          "manufacturer": null,
          "model": "172",
          "year": 2020,
          "serial_number": "TEST123456",
          "airframe_hours": 2000.0,
          "engine_hours": 1800.0,
          "propeller_hours": 1000.0,
          "photo_url": null,
          "description": null,
          "adsb_has_new_tc_items": false,
          "count_new_adsb": 0,
          "last_tc_adsb_version": null,
          "last_adsb_reviewed_at": null,
          "_id": "1769733120179849",
          "user_id": "1769733078496887",
          "created_at": "2026-01-30T00:32:00.179000",
          "updated_at": "2026-01-30T02:15:06.155000"
        }
      ],
      "timestamp": "2026-01-30T13:53:52.360067"
    },
    {
      "test_name": "Setup aircraft with baseline hours",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "registration": "C-GTEST",
        "aircraft_type": null,
        "manufacturer": null,
        "model": "172",
        "year": 2020,
        "serial_number": "TEST123456",
        "airframe_hours": 1000.0,
        "engine_hours": 900.0,
        "propeller_hours": 800.0,
        "photo_url": null,
        "description": null,
        "adsb_has_new_tc_items": false,
        "count_new_adsb": 0,
        "last_tc_adsb_version": null,
        "last_adsb_reviewed_at": null,
        "_id": "1769733120179849",
        "user_id": "1769733078496887",
        "created_at": "2026-01-30T00:32:00.179000",
        "updated_at": "2026-01-30T13:53:52.362000"
      },
      "timestamp": "2026-01-30T13:53:52.363100"
    },
    {
      "test_name": "Update engine_hours > airframe_hours (1200 > 1000)",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "registration": "C-GTEST",
        "aircraft_type": null,
        "manufacturer": null,
        "model": "172",
        "year": 2020,
        "serial_number": "TEST123456",
        "airframe_hours": 1000.0,
        "engine_hours": 1000.0,
        "propeller_hours": 800.0,
        "photo_url": null,
        "description": null,
        "adsb_has_new_tc_items": false,
        "count_new_adsb": 0,
        "last_tc_adsb_version": null,
        "last_adsb_reviewed_at": null,
        "_id": "1769733120179849",
        "user_id": "1769733078496887",
        "created_at": "2026-01-30T00:32:00.179000",
        "updated_at": "2026-01-30T13:53:52.364000"
      },
      "timestamp": "2026-01-30T13:53:52.365854"
    },
    {
      "test_name": "Engine hours normalized to airframe",
      "success": true,
      "details": "Engine hours correctly normalized from 1200 to 1000.0",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.365918"
    },
    {
      "test_name": "Update propeller_hours > airframe_hours (1500 > 1000)",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "registration": "C-GTEST",
        "aircraft_type": null,
        "manufacturer": null,
        "model": "172",
        "year": 2020,
        "serial_number": "TEST123456",
        "airframe_hours": 1000.0,
        "engine_hours": 1000.0,
        "propeller_hours": 1000.0,
        "photo_url": null,
        "description": null,
        "adsb_has_new_tc_items": false,
        "count_new_adsb": 0,
        "last_tc_adsb_version": null,
        "last_adsb_reviewed_at": null,
        "_id": "1769733120179849",
        "user_id": "1769733078496887",
        "created_at": "2026-01-30T00:32:00.179000",
        "updated_at": "2026-01-30T13:53:52.367000"
      },
      "timestamp": "2026-01-30T13:53:52.368523"
    },
    {
      "test_name": "Propeller hours normalized to airframe",
      "success": true,
      "details": "Propeller hours correctly normalized from 1500 to 1000.0",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.368585"
    },
    {
      "test_name": "Update engine_hours < airframe_hours (500 < 1000)",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "registration": "C-GTEST",
        "aircraft_type": null,
        "manufacturer": null,
        "model": "172",
        "year": 2020,
        "serial_number": "TEST123456",
        "airframe_hours": 1000.0,
        "engine_hours": 500.0,
        "propeller_hours": 1000.0,
        "photo_url": null,
        "description": null,
        "adsb_has_new_tc_items": false,
        "count_new_adsb": 0,
        "last_tc_adsb_version": null,
        "last_adsb_reviewed_at": null,
        "_id": "1769733120179849",
        "user_id": "1769733078496887",
        "created_at": "2026-01-30T00:32:00.179000",
        "updated_at": "2026-01-30T13:53:52.370000"
      },
      "timestamp": "2026-01-30T13:53:52.371219"
    },
    {
      "test_name": "Valid engine hours update accepted",
      "success": true,
      "details": "Engine hours correctly set to 500.0",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.371283"
    },
    {
      "test_name": "Update airframe_hours=2000 AND engine_hours=1800",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "registration": "C-GTEST",
        "aircraft_type": null,
        "manufacturer": null,
        "model": "172",
        "year": 2020,
        "serial_number": "TEST123456",
        "airframe_hours": 2000.0,
        "engine_hours": 1800.0,
        "propeller_hours": 1000.0,
        "photo_url": null,
        "description": null,
        "adsb_has_new_tc_items": false,
        "count_new_adsb": 0,
        "last_tc_adsb_version": null,
        "last_adsb_reviewed_at": null,
        "_id": "1769733120179849",
        "user_id": "1769733078496887",
        "created_at": "2026-01-30T00:32:00.179000",
        "updated_at": "2026-01-30T13:53:52.372000"
      },
      "timestamp": "2026-01-30T13:53:52.373750"
    },
    {
      "test_name": "Airframe and engine hours update accepted",
      "success": true,
      "details": "Airframe: 2000.0, Engine: 1800.0",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.373810"
    },
    {
      "test_name": "Counter Guard implementation complete",
      "success": true,
      "details": "All 4 test scenarios passed: normalization, valid updates, and airframe expansion",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.373820"
    },
    {
      "test_name": "Get aircraft list",
      "success": true,
      "details": "Status: 200",
      "response_data": [
        {
          "registration": "C-GTEST",
          "aircraft_type": null,
          "manufacturer": null,
          "model": "172",
          "year": 2020,
          "serial_number": "TEST123456",
          "airframe_hours": 2000.0,
          "engine_hours": 1800.0,
          "propeller_hours": 1000.0,
          "photo_url": null,
          "description": null,
          "adsb_has_new_tc_items": false,
          "count_new_adsb": 0,
          "last_tc_adsb_version": null,
          "last_adsb_reviewed_at": null,
          "_id": "1769733120179849",
          "user_id": "1769733078496887",
          "created_at": "2026-01-30T00:32:00.179000",
          "updated_at": "2026-01-30T13:53:52.372000"
        }
      ],
      "timestamp": "2026-01-30T13:53:52.375707"
    },
    {
      "test_name": "Get critical mentions for aircraft C-GTEST",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "aircraft_id": "1769733120179849",
        "registration": "C-GTEST",
        "critical_mentions": {
          "elt": [],
          "avionics": [],
          "fire_extinguisher": [],
          "general_limitations": []
        },
        "summary": {
          "elt_count": 0,
          "avionics_count": 0,
          "fire_extinguisher_count": 0,
          "general_limitations_count": 0,
          "total_count": 0
        },
        "disclaimer": "INFORMATIONAL ONLY - Always verify with AME and official records"
      },
      "timestamp": "2026-01-30T13:53:52.378899"
    },
    {
      "test_name": "Critical mentions endpoint validation",
      "success": true,
      "details": "All validations passed. Total mentions: 0, Categories: {'elt_count': 0, 'avionics_count': 0, 'fire_extinguisher_count': 0, 'general_limitations_count': 0}",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.378971"
    },
    {
      "test_name": "Get critical mentions for invalid aircraft",
      "success": true,
      "details": "Status: 404",
      "response_data": {
        "detail": "Aircraft not found"
      },
      "timestamp": "2026-01-30T13:53:52.381026"
    },
    {
      "test_name": "Get aircraft list",
      "success": true,
      "details": "Status: 200",
      "response_data": [
        {
          "registration": "C-GTEST",
          "aircraft_type": null,
          "manufacturer": null,
          "model": "172",
          "year": 2020,
          "serial_number": "TEST123456",
          "airframe_hours": 2000.0,
          "engine_hours": 1800.0,
          "propeller_hours": 1000.0,
          "photo_url": null,
          "description": null,
          "adsb_has_new_tc_items": false,
          "count_new_adsb": 0,
          "last_tc_adsb_version": null,
          "last_adsb_reviewed_at": null,
          "_id": "1769733120179849",
          "user_id": "1769733078496887",
          "created_at": "2026-01-30T00:32:00.179000",
          "updated_at": "2026-01-30T13:53:52.372000"
        }
      ],
      "timestamp": "2026-01-30T13:53:52.382928"
    },
    {
      "test_name": "Get OCR scan AD/SB for aircraft C-GTEST",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "aircraft_id": "1769733120179849",
        "registration": "C-GTEST",
        "items": [],
        "total_unique_references": 0,
        "total_ad": 0,
        "total_sb": 0,
        "documents_analyzed": 0,
        "source": "scanned_documents",
        "disclaimer": "These references were detected by OCR from scanned maintenance documents. This is DOCUMENTARY EVIDENCE ONLY, not a compliance assessment. Verify all information with original documents and a licensed AME."
      },
      "timestamp": "2026-01-30T13:53:52.385152"
    },
    {
      "test_name": "OCR scan AD/SB endpoint validation",
      "success": true,
      "details": "All validations passed. Items: 0, AD: 0, SB: 0, Documents: 0",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.385214"
    },
    {
      "test_name": "Get OCR scan AD/SB for invalid aircraft",
      "success": true,
      "details": "Status: 404",
      "response_data": {
        "detail": "Aircraft not found"
      },
      "timestamp": "2026-01-30T13:53:52.387167"
    },
    {
      "test_name": "Get aircraft list",
      "success": true,
      "details": "Status: 200",
      "response_data": [
        {
          "registration": "C-GTEST",
          "aircraft_type": null,
          "manufacturer": null,
          "model": "172",
          "year": 2020,
          "serial_number": "TEST123456",
          "airframe_hours": 2000.0,
          "engine_hours": 1800.0,
          "propeller_hours": 1000.0,
          "photo_url": null,
          "description": null,
          "adsb_has_new_tc_items": false,
          "count_new_adsb": 0,
          "last_tc_adsb_version": null,
          "last_adsb_reviewed_at": null,
          "_id": "1769733120179849",
          "user_id": "1769733078496887",
          "created_at": "2026-01-30T00:32:00.179000",
          "updated_at": "2026-01-30T13:53:52.372000"
        }
      ],
      "timestamp": "2026-01-30T13:53:52.389088"
    },
    {
      "test_name": "Get TC vs OCR comparison for aircraft C-GTEST",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "aircraft_id": "1769733120179849",
        "registration": "C-GTEST",
        "items": [],
        "total_tc_references": 0,
        "total_seen": 0,
        "total_not_seen": 0,
        "ocr_documents_analyzed": 0,
        "source": "tc_imported_references",
        "disclaimer": "This comparison shows which TC AD/SB references have been detected in scanned maintenance documents. This is DOCUMENTARY VISIBILITY ONLY, not a compliance assessment. Verify with original documents and a licensed AME."
      },
      "timestamp": "2026-01-30T13:53:52.391457"
    },
    {
      "test_name": "TC vs OCR comparison endpoint validation",
      "success": true,
      "details": "All validations passed. TC refs: 0, Seen: 0, Not seen: 0, OCR docs: 0",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.391518"
    },
    {
      "test_name": "Get TC vs OCR comparison for invalid aircraft",
      "success": true,
      "details": "Status: 404",
      "response_data": {
        "detail": "Aircraft not found"
      },
      "timestamp": "2026-01-30T13:53:52.393372"
    },
    {
      "test_name": "Get AD/SB alerts list",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "alerts": [],
        "total_count": 0,
        "unread_count": 0
      },
      "timestamp": "2026-01-30T13:53:52.395997"
    },
    {
      "test_name": "AD/SB alerts list validation",
      "success": true,
      "details": "All validations passed. Total alerts: 0, Unread: 0",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.396059"
    },
    {
      "test_name": "Get AD/SB alert counts",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "unread_count": 0,
        "total_count": 0
      },
      "timestamp": "2026-01-30T13:53:52.398239"
    },
    {
      "test_name": "AD/SB alert counts validation",
      "success": true,
      "details": "Count endpoint working. Unread: 0, Total: 0",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.398309"
    },
    {
      "test_name": "Get AD/SB global statistics",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "total_global_references": 0,
        "total_alerts_created": 0,
        "top_models": [],
        "disclaimer": "TC-SAFE: Statistics only, no compliance inference"
      },
      "timestamp": "2026-01-30T13:53:52.400841"
    },
    {
      "test_name": "AD/SB global stats validation",
      "success": true,
      "details": "All validations passed. Global refs: 0, Alerts created: 0, Top models: 0",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.400902"
    },
    {
      "test_name": "Alert management tests",
      "success": true,
      "details": "No alerts available for management testing (expected for new system)",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.400911"
    },
    {
      "test_name": "Mark invalid alert as read",
      "success": true,
      "details": "Status: 400",
      "response_data": {
        "detail": "Invalid alert_id"
      },
      "timestamp": "2026-01-30T13:53:52.402650"
    },
    {
      "test_name": "Get TC AD/SB version",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "tc_adsb_version": "2026-01",
        "description": "TC AD/SB data version used for detection"
      },
      "timestamp": "2026-01-30T13:53:52.404157"
    },
    {
      "test_name": "Trigger detection for user aircraft",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "tc_adsb_version": "2026-01",
        "detection_timestamp": "2026-01-30T13:53:52.411979+00:00",
        "total_aircraft_processed": 1,
        "aircraft_with_new_items": 0,
        "aircraft_skipped": 1,
        "total_new_items_found": 0,
        "results": [
          {
            "aircraft_id": "1769733120179849",
            "registration": "C-GTEST",
            "designator": null,
            "new_items_found": false,
            "new_items_count": 0,
            "new_items_refs": [],
            "previous_version": null,
            "current_version": "2026-01",
            "skipped": true,
            "skip_reason": "Aircraft identity not found in TC Registry"
          }
        ],
        "triggered_by": "user:1769733078496887"
      },
      "timestamp": "2026-01-30T13:53:52.412414"
    },
    {
      "test_name": "Trigger system-wide detection",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "tc_adsb_version": "2026-01",
        "detection_timestamp": "2026-01-30T13:53:52.415470+00:00",
        "total_aircraft_processed": 1,
        "aircraft_with_new_items": 0,
        "aircraft_skipped": 1,
        "total_new_items_found": 0,
        "results": [
          {
            "aircraft_id": "1769733120179849",
            "registration": "C-GTEST",
            "designator": null,
            "new_items_found": false,
            "new_items_count": 0,
            "new_items_refs": [],
            "previous_version": null,
            "current_version": "2026-01",
            "skipped": true,
            "skip_reason": "Aircraft identity not found in TC Registry"
          }
        ],
        "triggered_by": "admin:1769733078496887"
      },
      "timestamp": "2026-01-30T13:53:52.415841"
    },
    {
      "test_name": "Trigger scheduled detection",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "tc_adsb_version": "2025-01",
        "detection_timestamp": "2026-01-30T13:53:52.418122+00:00",
        "total_aircraft_processed": 1,
        "aircraft_with_new_items": 0,
        "aircraft_skipped": 1,
        "total_new_items_found": 0,
        "results": [
          {
            "aircraft_id": "1769733120179849",
            "registration": "C-GTEST",
            "designator": null,
            "new_items_found": false,
            "new_items_count": 0,
            "new_items_refs": [],
            "previous_version": null,
            "current_version": "2025-01",
            "skipped": true,
            "skip_reason": "Aircraft identity not found in TC Registry"
          }
        ],
        "triggered_by": "scheduled"
      },
      "timestamp": "2026-01-30T13:53:52.418475"
    },
    {
      "test_name": "Get alert status for aircraft",
      "success": false,
      "details": "Status: 404 (expected 200)",
      "response_data": {
        "detail": "Aircraft not found or not authorized"
      },
      "timestamp": "2026-01-30T13:53:52.420549"
    },
    {
      "test_name": "Mark AD/SB as reviewed",
      "success": false,
      "details": "Status: 404 (expected 200)",
      "response_data": {
        "detail": "Aircraft not found or not authorized"
      },
      "timestamp": "2026-01-30T13:53:52.422582"
    },
    {
      "test_name": "Verify alert cleared after review",
      "success": false,
      "details": "Status: 404 (expected 200)",
      "response_data": {
        "detail": "Aircraft not found or not authorized"
      },
      "timestamp": "2026-01-30T13:53:52.424566"
    },
    {
      "test_name": "Get audit log entries",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "total": 30,
        "entries": [
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2025-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "scheduled",
            "notes": "System-wide: Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T13:53:52.417000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2025-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "scheduled",
            "notes": "System-wide detection started",
            "created_at": "2026-01-30T13:53:52.416000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "admin:1769733078496887",
            "notes": "System-wide: Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T13:53:52.415000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "admin:1769733078496887",
            "notes": "System-wide detection started",
            "created_at": "2026-01-30T13:53:52.414000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T13:53:52.411000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "User detection started for user_id=1769733078496887",
            "created_at": "2026-01-30T13:53:52.405000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:15:06.220000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "User detection started for user_id=1769733078496887",
            "created_at": "2026-01-30T02:15:06.219000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:15:06.216000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "User detection started for user_id=1769733078496887",
            "created_at": "2026-01-30T02:15:06.215000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:15:06.209000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "User detection started for user_id=1769733078496887",
            "created_at": "2026-01-30T02:15:06.208000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2025-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "scheduled",
            "notes": "System-wide: Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:15:06.191000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2025-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "scheduled",
            "notes": "System-wide detection started",
            "created_at": "2026-01-30T02:15:06.190000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "admin:1769733078496887",
            "notes": "System-wide: Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:15:06.188000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "admin:1769733078496887",
            "notes": "System-wide detection started",
            "created_at": "2026-01-30T02:15:06.187000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:15:06.184000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "User detection started for user_id=1769733078496887",
            "created_at": "2026-01-30T02:15:06.183000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:02:04.931000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "User detection started for user_id=1769733078496887",
            "created_at": "2026-01-30T02:02:04.930000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:02:04.927000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "User detection started for user_id=1769733078496887",
            "created_at": "2026-01-30T02:02:04.926000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:02:04.919000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "User detection started for user_id=1769733078496887",
            "created_at": "2026-01-30T02:02:04.918000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2025-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "scheduled",
            "notes": "System-wide: Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:02:04.898000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2025-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "scheduled",
            "notes": "System-wide detection started",
            "created_at": "2026-01-30T02:02:04.896000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "admin:1769733078496887",
            "notes": "System-wide: Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:02:04.894000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "admin:1769733078496887",
            "notes": "System-wide detection started",
            "created_at": "2026-01-30T02:02:04.892000"
          },
          {
            "event_type": "DETECTION_COMPLETED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "Processed 1 aircraft, 0 with new items",
            "created_at": "2026-01-30T02:02:04.889000"
          },
          {
            "event_type": "DETECTION_STARTED",
            "aircraft_id": null,
            "registration": null,
            "tc_adsb_version": "2026-01",
            "new_items_count": 0,
            "new_items_refs": [],
            "triggered_by": "user:1769733078496887",
            "notes": "User detection started for user_id=1769733078496887",
            "created_at": "2026-01-30T02:02:04.877000"
          }
        ]
      },
      "timestamp": "2026-01-30T13:53:52.427572"
    },
    {
      "test_name": "Get audit log for specific aircraft",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "total": 0,
        "entries": []
      },
      "timestamp": "2026-01-30T13:53:52.429742"
    },
    {
      "test_name": "Audit log contains entries",
      "success": true,
      "details": "Total entries: 30",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.429797"
    },
    {
      "test_name": "Get aircraft with AD/SB fields",
      "success": false,
      "details": "Status: 404 (expected 200)",
      "response_data": {
        "detail": "Aircraft not found"
      },
      "timestamp": "2026-01-30T13:53:52.431574"
    },
    {
      "test_name": "Trigger detection before auto-clear test",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "tc_adsb_version": "2026-01",
        "detection_timestamp": "2026-01-30T13:53:52.434830+00:00",
        "total_aircraft_processed": 1,
        "aircraft_with_new_items": 0,
        "aircraft_skipped": 1,
        "total_new_items_found": 0,
        "results": [
          {
            "aircraft_id": "1769733120179849",
            "registration": "C-GTEST",
            "designator": null,
            "new_items_found": false,
            "new_items_count": 0,
            "new_items_refs": [],
            "previous_version": null,
            "current_version": "2026-01",
            "skipped": true,
            "skip_reason": "Aircraft identity not found in TC Registry"
          }
        ],
        "triggered_by": "user:1769733078496887"
      },
      "timestamp": "2026-01-30T13:53:52.435209"
    },
    {
      "test_name": "View structured AD/SB (auto-clear trigger)",
      "success": false,
      "details": "Status: 404 (expected 200)",
      "response_data": {
        "detail": "Aircraft not found"
      },
      "timestamp": "2026-01-30T13:53:52.437190"
    },
    {
      "test_name": "Get TC AD/SB version",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "tc_adsb_version": "2026-01",
        "description": "TC AD/SB data version used for detection"
      },
      "timestamp": "2026-01-30T13:53:52.438722"
    },
    {
      "test_name": "First detection run",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "tc_adsb_version": "2026-01",
        "detection_timestamp": "2026-01-30T13:53:52.441338+00:00",
        "total_aircraft_processed": 1,
        "aircraft_with_new_items": 0,
        "aircraft_skipped": 1,
        "total_new_items_found": 0,
        "results": [
          {
            "aircraft_id": "1769733120179849",
            "registration": "C-GTEST",
            "designator": null,
            "new_items_found": false,
            "new_items_count": 0,
            "new_items_refs": [],
            "previous_version": null,
            "current_version": "2026-01",
            "skipped": true,
            "skip_reason": "Aircraft identity not found in TC Registry"
          }
        ],
        "triggered_by": "user:1769733078496887"
      },
      "timestamp": "2026-01-30T13:53:52.441701"
    },
    {
      "test_name": "Second detection run (should skip)",
      "success": true,
      "details": "Status: 200",
      "response_data": {
        "tc_adsb_version": "2026-01",
        "detection_timestamp": "2026-01-30T13:53:52.444449+00:00",
        "total_aircraft_processed": 1,
        "aircraft_with_new_items": 0,
        "aircraft_skipped": 1,
        "total_new_items_found": 0,
        "results": [
          {
            "aircraft_id": "1769733120179849",
            "registration": "C-GTEST",
            "designator": null,
            "new_items_found": false,
            "new_items_count": 0,
            "new_items_refs": [],
            "previous_version": null,
            "current_version": "2026-01",
            "skipped": true,
            "skip_reason": "Aircraft identity not found in TC Registry"
          }
        ],
        "triggered_by": "user:1769733078496887"
      },
      "timestamp": "2026-01-30T13:53:52.444807"
    },
    {
      "test_name": "Skip logic works for same version",
      "success": true,
      "details": "First run skipped: 1, Second run skipped: 1",
      "response_data": null,
      "timestamp": "2026-01-30T13:53:52.444863"
    },
    {
      "test_name": "Get alert for invalid aircraft",
      "success": true,
      "details": "Status: 404",
      "response_data": {
        "detail": "Aircraft not found or not authorized"
      },
      "timestamp": "2026-01-30T13:53:52.446939"
    },
    {
      "test_name": "Mark reviewed for invalid aircraft",
      "success": true,
      "details": "Status: 404",
      "response_data": {
        "detail": "Aircraft not found or not authorized"
      },
      "timestamp": "2026-01-30T13:53:52.448992"
    }
  ]
}